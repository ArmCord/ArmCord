<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <style>
            @import url("../content/css/settings.css");
        </style>
    </head>

    <body>
        <div class="saveBar">
            <button data-string="settings-save" class="center" onclick="saveSettings()">Save Settings</button>
        </div>
        <div class="restartBar">
            <button data-string="settings-restart" class="center" onclick="settings.restart()">Restart App</button>
        </div>
        <div class="switch acTheme">
            <select name="theme" data-setting="windowStyle" class="left dropdown">
                <option value="default" data-string="settings-theme-default">Default</option>
                <option value="native" data-string="settings-theme-native">Native</option>
            </select>
            <p class="header" data-string="settings-theme">ArmCord theme</p>
            <div class="description">
                <p data-string="settings-theme-desc1">ArmCord "themes" manage apps behaviour and looks.</p>
                <b data-string="settings-theme-default">Default</b> -
                <span data-string="settings-theme-desc2">
                    this is how ArmCord looks when you first launch it. It includes recreation of Discord's custom
                    titlebar and ArmCord specific styles injected into Discord.
                </span>
                <br />
                <b data-string="settings-theme-native">Native</b> -
                <span data-string="settings-theme-desc3">
                    uses native titlebar of OS you're currently running (e.g Windows 7/10). Functions more similar to
                    actual Discord app on Linux.
                </span>
            </div>
        </div>
        <br />
        <div class="switch acCSP">
            <label class="header">ArmCord CSP</label>
            <input class="tgl tgl-light left" data-setting="armcordCSP" type="checkbox" />
            <label class="tgl-btn left" for="csp"></label>
            <p class="description" data-string="settings-csp-desc">
                ArmCord CSP is our system that manages loading custom content loading into the Discord app. Stuff like
                client mods and themes depend on it. Disable if you want to get rid of mods and custom styles.
            </p>
        </div>
        <br />
        <div class="switch acTray">
            <label class="header" data-string="settings-tray">Minimize to tray</label>
            <input class="tgl tgl-light left" data-setting="minimizeToTray" type="checkbox" />
            <label class="tgl-btn left" for="tray"></label>
            <p class="description" data-string="settings-tray-desc">
                When disabled, ArmCord will close like any other window when closed, otherwise it'll sit back and relax
                in your system tray for later.
            </p>
        </div>
        <br />
        <div class="switch acPatches">
            <label class="header" data-string="settings-patches">Automatic Patches</label>
            <input class="tgl tgl-light left" data-setting="automaticPatches" type="checkbox" />
            <label class="tgl-btn left" for="patches"></label>
            <p class="description" data-string="settings-patches-desk">
                Fetches automatic patches that are distributed if release turns out to have bugs after release. Usually
                you don't have to keep this enabled, unless notified in support Discord.
            </p>
        </div>
        <br />
        <div class="switch acWebsocket">
            <label class="header" data-string="settings-invitewebsocket">Rich Presence (Experimental)</label>
            <input class="tgl tgl-light left" data-setting="inviteWebsocket" type="checkbox" />
            <label class="tgl-btn left" for="websocket"></label>
            <p class="description">
                <!-- TODO add data-string -->
                Uses <a target="_blank" href="https://github.com/OpenAsar/arrpc">arRPC</a> to support Discord RPC (Rich
                Presence) with local programs on your machine. Work in progress.
            </p>
        </div>
        <br />
        <div class="switch acMobileMode">
            <label class="header" data-string="settings-mobileMode">Mobile mode</label>
            <input class="tgl tgl-light left" data-setting="mobileMode" type="checkbox" />
            <label class="tgl-btn left" for="mobile"></label>
            <p class="description" data-string="settings-mobileMode-desc">
                If you're on a device with touch-screen this feature is for you! It activates Discord's hidden mobile
                mode meant for phones and tablets. Only major feature missing is voice chat support. This is ideal for
                users on PinePhone and similar.
            </p>
        </div>
        <br />
        <div class="switch acAltPaste">
            <label class="header" data-string="settings-altPaste">Alternative paste</label>
            <input class="tgl tgl-light left" data-setting="alternativePaste" type="checkbox" />
            <label class="tgl-btn left" for="alternativePaste"></label>
            <p class="description" data-string="settings-altPaste-desc">
                If you're on Gnome on Linux or just simply can't paste images copied from other messages, then this is
                for you. This enables alternative module for pasting images. Only enable this when you're experiencing
                issues.
            </p>
        </div>
        <br />
        <div class="switch acChannel">
            <select name="channel" data-setting="channel" class="left dropdown">
                <option value="stable">Stable</option>
                <option value="canary">Canary</option>
                <option value="ptb">PTB</option>
                <option value="hummus">Hummus (Experimental)</option>
            </select>
            <div>
                <p class="header" data-string="settings-channel">Discord channel</p>
                <div class="description">
                    <p data-string="settings-channel-desc1">
                        You can use this setting to change current instance of Discord:
                    </p>
                    <b>Stable</b> -
                    <span data-string="settings-channel-desc2">
                        you're probably most familiar with this one. It's the one you see in default Discord client!
                    </span>
                    <br />
                    <b>Canary</b> -
                    <span data-string="settings-channel-desc3">
                        this is alpha test release of Discord. By using it you gain access to the newest features and
                        fixes.
                    </span>
                    <br />
                    <b>PTB</b> -
                    <span data-string="settings-channel-desc4">
                        public test build. Receives features earlier than stable but is a bit older than Canary.
                    </span>
                    <br />
                    <b>Hummus</b> -
                    <span data-string="settings-channel-desc5">
                        unofficial instance of Discord that takes you back to 2016! Only client mod available to run
                        alongside with it is Cordwood. It's run by community, so you take all the risk by using it.
                    </span>
                </div>
            </div>
        </div>
        <br />
        <div class="switch acClientMod">
            <select name="mod" data-string="mod" data-setting="mods" class="left dropdown">
                <option value="vencord">Vencord</option>
                <option value="shelter">Shelter</option>
                <option value="none" data-string="settings-none">None</option>
            </select>
            <p class="header" data-string="settings-mod">Client mod</p>
            <div class="description">
                <p data-string="settings-mod-desc1">
                    Client mods are programs that allow you customize your Discord experience. They can change
                    appearance of the client, modify behaviours or add new features!
                </p>
                <!-- TODO: Translation -->
                <b>Vencord</b> - lightweight, and easy to use client mod. Features a built-in store for plugins.
                <br />
                <!-- TODO: Translation -->
                <b>Shelter</b> - is a new generation client mod built to be essentially bulletproof.
            </div>
        </div>
        <br />
        <div class="switch acPrfmMode">
            <select name="prfmMode" data-setting="performanceMode" class="left dropdown">
                <option value="performance" data-string="settings-prfmMode-performance">Performance</option>
                <option value="battery" data-string="settings-prfmMode-battery">Battery</option>
                <option value="none" data-string="settings-none">None</option>
            </select>
            <p class="header" data-string="settings-prfmMode">Performance mode</p>
            <!-- FIXME: Add data-string once this string's name has been fixed -->
            <p class="description">
                Performance mode is an experimental function that may either increase responsiveness and performance of
                ArmCord or... decrease it. Please try every option and see which fits you the best.
            </p>
        </div>
        <br />
        <div class="switch acTray">
            <select name="trayIcon" data-setting="trayIcon" class="left dropdown">
                <optgroup label="- Discord -">
                    <option value="default">Dynamic</option>
                    <option value="dsc-tray">Discord Icon</option>
                    <option value="clsc-dsc-tray">Classic Discord Icon</option>
                </optgroup>
                <optgroup label="- ArmCord -">
                    <option value="ac_plug_colored">Colored Plug</option>
                    <option value="ac_white_plug">White Plug</option>
                    <option value="ac_white_plug_hollow">White Plug Alt</option>
                    <option value="ac_black_plug">Black Plug</option>
                    <option value="ac_black_plug_hollow">Black Plug Alt</option>
                </optgroup>
            </select>
            <p class="header" data-string="settings-trayIcon">Tray icon</p>
            <p class="description" data-string="settings-trayIcon-desc">Set the icon which will appear in tray menu.</p>
        </div>
        <br />
        <br />
        <div class="switch acAdvSettings">
            <h1 data-string="settings-advanced" class="center advancedText">⚠️ Advanced User Zone ⚠️</h1>
            <br />
            <br />
            <label class="header" data-string="settings-skipSplash">Skip Splash Screen (Experimental)</label>
            <input class="tgl tgl-light left" data-setting="skipSplash" type="checkbox" />
            <label class="tgl-btn left" for="skipSplash"></label>
            <p class="description">Skips ArmCord splash screen when you start up the app.</p>
            <br />
            <button data-string="settings-pluginsFolder" data-open="Plugins" class="center">Open Plugins Folder</button>
            <br />
            <button data-string="settings-themesFolder" data-open="Themes" class="center">Open Themes Folder</button>
            <br />
            <button data-string="settings-storageFolder" data-open="Storage" class="center">Open Storage Folder</button>
            <br />
            <button id="settings-copyDebugInfo" class="center" onclick="settings.copyDebugInfo()">
                Copy Debug Info
            </button>
        </div>
    </body>

    <script>
        document.querySelectorAll("[data-string]").forEach(async (el) => {
            el.textContent = await settings.getLang(el.dataset.string);
        });

        const elements = document.querySelectorAll("[data-setting]");
        elements.forEach(async (e) => {
            const value = await settings.get(e.dataset.setting);
            if (e.tagName == "SELECT") e.value = value;
            else e.checked = value;
        });

        function saveSettings() {
            const elements = Array.from(document.querySelectorAll("[data-setting]"));
            const obj = Object.fromEntries(elements.map((e) => [e.dataset.setting, e.checked ?? e.value]));

            obj.doneSetup = true;
            settings.save(obj);

            if (
                confirm(`Your settings have been saved!
Some changes may require the app to restart before taking effect, would you like to do so now?`) == true
            ) {
                settings.restart();
            }
        }

        document.querySelectorAll("[data-open]").forEach((e) => {
            e.addEventListener("click", settings[`open${e.dataset.open}Folder`]);
        });
    </script>
</html>
